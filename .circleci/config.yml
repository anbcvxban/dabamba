version: 2.1

jobs:
  build:
    parameters:
      resource:
        type: string
    resource_class: << parameters.resource >>
    machine:
      image: ubuntu-1604:201903-01
    steps:
      - run: sudo adduser --disabled-password --gecos "" joe && sudo usermod -aG sudo joe && sudo -u joe -H sh -c "whoami"
      - run: pwd

workflows:
  workflow:
    jobs:
      - build:
          matrix:
            parameters:
              resource: ["medium", "large", "xlarge", "2xlarge"]